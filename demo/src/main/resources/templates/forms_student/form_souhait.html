<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Vos souhaits</title>
</head>
<body style="margin-left: 10px; margin-right: 10px;"
	onload="countChars(document.getElementById('motivations').value)">
	<div th:fragment="content">
		<h2>Vos souhaits</h2>
		<div class="row">
		<div class="col-md-4">
		<br> <label> Missions : </label> 
		<select size="10" class="form-control" id="allMissions">
			<option th:each="mission : ${listMission}" th:value="${{mission.id}}"
				th:text="${mission.title}">
			</option>		
		</select> 
		</div>
		<div class="col-md-4">
		<button type="button" class="btn btn-success" onclick="addMission()"">Ajouter</button>
		<br>
		<button type="button" class="btn btn-danger" onclick="removeMission()">Supprimer</button>
		</div>
		<div class="col-md-4">
			<br> <label> Missions selectionnées : </label> 
		<select size="10" class="form-control" th:field="${student.wish.missions}" multiple="multiple">
		</select> 
		</div>
		</div>
		<div class="row">
		<label for="autre"> Autre mission souhaitée
			(précisez) : </label>
		<textarea class="form-control" id="autre" th:value="${student.wish.otherWish}"
			th:field="${student.wish.otherWish}" maxlength="150" rows="5"
			style="resize: none;"></textarea>
		</div>
		<div class="row">
		<h2>Vos motivations</h2>

		<div>
			<textarea class="form-control" id="motivations"
				th:value="${student.motivation}" th:field="${student.motivation}"
				oninput="countChars(this.value)" maxlength="900" rows="10"
				style="resize: none;"></textarea>
		</div>
		
		<div class="indications">
			<h5>
				<b><span id="checkCount" style="color: red">&#x2718;</span></b><i>
					Entre 450 et 900 caractères (<span id="charsCount">0</span>)
				</i>
			</h5>
		</div>
		</div>
		<script>
			function countChars(val) {
				document.getElementById("charsCount").innerHTML = val.length;

				var checkCount = document.getElementById("checkCount");
				if (val.length >= 450) {
					checkCount.innerHTML = "&#x2714;";
					checkCount.style.color = "green";
				} else {
					checkCount.innerHTML = "&#x2718;";
					checkCount.style.color = "red";
				}
			}
			
			function addMission() {
				selected = document.getElementById("wish.missions");
				if(selected.length < 4){
					selectMission = document.getElementById("allMissions");
					
					var option = selectMission.options[selectMission.selectedIndex];
					
					selected.add(option);
				}
			}
			function removeMission() {
					selected = document.getElementById("wish.missions");
					selectMission = document.getElementById("allMissions");
					
					var option = selected.options[selected.selectedIndex];
					
					selectMission.add(option);
			}
		</script>
	</div>
</body>
</html>